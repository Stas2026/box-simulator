<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brawl Clicker</title>

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* CSS Стилі */
        body {
            margin: 0;
            overflow: hidden; /* Прибираємо прокрутку */
            font-family: 'Roboto', sans-serif;
            color: white;
            -webkit-user-select: none; /* Заборона виділення тексту */
            -ms-user-select: none;
            user-select: none;
            background-color: #000;
        }

        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('img/lobby.jpeg'); /* Шлях до фону */
            background-size: cover;
            background-position: center;
            z-index: -1;
        }

        .container {
            position: relative;
            width: 100%;
            height: 100vh; /* Висота в'юпорту */
            display: flex;
            flex-direction: column; /* Елементи розташовані по вертикалі */
            justify-content: space-between; /* Розподіляємо простір */
            align-items: center; /* Центруємо по горизонталі */
            padding: 10px;
            box-sizing: border-box;
        }

        /* Контейнер для різних екранів (меню, магазин тощо) */
        #viewsContainer {
            flex-grow: 1; /* Займає весь доступний простір між хедером і футером */
            width: 100%;
            position: relative; /* База для абсолютного позиціонування екранів */
            overflow-y: auto; /* Дозволяє прокрутку, якщо вміст екрану не поміщається */
        }

        /* Базові стилі для всіх екранів */
        .view {
            position: absolute; /* Розміщуємо екрани абсолютно всередині #viewsContainer */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%; /* Займають всю висоту #viewsContainer */
            display: flex; /* Використовуємо Flexbox для внутрішнього розташування */
            flex-direction: column;
            align-items: center;
            padding-bottom: 70px; /* Відступ знизу, щоб вміст не ховався під футером */
            box-sizing: border-box;
            overflow-y: auto; /* Дозволяє прокрутку вмісту всередині кожного екрану */
            /* background-color: rgba(0, 0, 0, 0.5);  Можна додати напівпрозорий фон для тестування */
        }

        /* Стиль для прихованих екранів */
        .hidden {
            display: none !important; /* Приховуємо елемент, !important для пріоритету */
        }

        /* Специфічні стилі для екрану меню */
        #menuView .header {
             width: 95%;
             text-align: center;
             margin-top: 15px;
             z-index: 1; /* Панель поверх інших елементів меню */
        }

        #menuView .currency-panel {
            display: inline-flex;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.6);
            padding: 8px 20px;
            border-radius: 25px;
            border: 3px solid gold;
            box-shadow: 0 0 10px gold;
        }

        #menuView .currency-panel img {
            height: 35px;
            margin-right: 12px;
        }

        #menuView .currency-count {
            font-family: 'Open Sans', sans-serif;
            font-size: 1.8em;
            font-weight: 700;
            color: #ffdd00;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        #menuView .main-content {
            flex-grow: 1; /* Займає весь доступний простір в меню між хедером і низом */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1; /* Контент поверх інших елементів меню */
        }

        #menuView .colt-image {
            width: 180px;
            cursor: pointer;
            transition: transform 0.1s ease-in-out;
            filter: drop-shadow(0 0 15px rgba(0, 0, 0, 0.5));
        }

        #menuView .colt-image:active {
            transform: scale(0.9);
        }


        /* Стилі для футера (навігаційні кнопки) */
        .footer {
            width: 98%;
            margin-bottom: 10px;
            display: flex;
            justify-content: center; /* Центруємо групу кнопок */
            gap: 8px; /* Зменшений відступ між елементами */
            z-index: 2; /* Футер поверх екранів */
            flex-wrap: wrap;
            padding: 0 10px;
            box-sizing: border-box;
            align-items: center;
        }

        .nav-button {
            padding: 5px; /* Зменшені відступи для кнопок із зображеннями */
            font-size: 1em; /* Розмір шрифту збережено для кнопки "Події" */
            cursor: pointer;
            background-color: rgba(0, 0, 0, 0.75);
            color: white; /* Колір тексту збережено для кнопки "Події" */
            border: 2px solid #00b0ff;
            border-radius: 10px;
            font-weight: 700; /* Жирний шрифт для кнопки "Події" */
            transition: background-color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
            font-family: 'Roboto', sans-serif; /* Шрифт для кнопки "Події" */
            box-shadow: 0 0 5px rgba(0, 176, 255, 0.5);
            height: 60px; /* Фіксована висота для кнопок */
            display: flex;
            justify-content: center;
            align-items: center;
            flex-grow: 1; /* Дозволяє кнопкам трохи розтягуватись */
            max-width: 120px; /* Максимальна ширина кнопки */
        }

        .nav-button img {
            display: block;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .nav-button:hover {
            background-color: rgba(0, 0, 0, 0.9);
            border-color: #33ccff;
            box-shadow: 0 0 8px rgba(0, 176, 255, 0.8);
        }

        .nav-button.active-button {
            border-color: #ffdd00; /* Жовта рамка */
            background-color: rgba(255, 221, 0, 0.3); /* Напівпрозорий жовтий фон */
            box-shadow: 0 0 10px rgba(255, 221, 0, 0.8); /* Сильніше жовте світіння */
            color: #ffdd00; /* Жовтий текст для кнопки "Події", якщо вона стане активною */
        }

         /* Анімація летючої монети */
         @keyframes coin-fly-to-panel {
             0% {
                 opacity: 1;
                 transform: translate(-50%, -50%) scale(1);
             }
             100% {
                 opacity: 0;
                 transform: translate(0, 0) scale(0.5); /* Кінцева позиція буде встановлена JS */
             }
         }

         .flying-coin {
             position: fixed;
             width: 30px;
             height: 30px;
             pointer-events: none;
             z-index: 10;
             opacity: 0;
             transition: transform 1s ease-out, opacity 1s ease-out;
         }


        /* Стилі для екрану магазину (тимчасові) */
        #shopView {
             /* Наслідує стилі .view */
             justify-content: flex-start; /* Вирівнювання вмісту магазину зверху */
             padding-top: 20px; /* Відступ зверху для вмісту магазину */
        }

        #shopView h2 {
            margin-top: 0;
            color: gold;
            font-family: 'Open Sans', sans-serif;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        #shopView p {
            font-size: 1.1em;
        }

        /* Стилі для екрану подій (тимчасові) */
         #eventsView {
              /* Наслідує стилі .view */
              justify-content: flex-start;
              padding-top: 20px;
         }
         #eventsView h2 {
             margin-top: 0;
             color: #ff0000; /* Червоний колір */
             font-family: 'Open Sans', sans-serif;
             text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
         }
         #eventsView p {
             font-size: 1.1em;
         }


    </style>
</head>
<body>

    <div class="background"></div>

    <div class="container">

        <div id="viewsContainer">
            <div id="menuView" class="view">
                 <div class="header">
                    <div class="currency-panel">
                        <img src="img/gold_coin.png" alt="Gold Coin">
                        <span id="coinCount" class="currency-count">0</span> </div>
                </div>
                <div class="main-content">
                    <img src="img/colt.png" alt="Colt" class="colt-image" id="coltImage">
                </div>
            </div>

            <div id="shopView" class="view hidden">
                <h2>Магазин</h2>
                <p>Тут буде вміст магазину: товари, пропозиції тощо.</p>
                </div>

            <div id="eventsView" class="view hidden">
                 <h2>Події</h2>
                 <p>Тут буде інформація про події.</p>
             </div>

        </div>

        <div class="footer">
            <button class="nav-button">
                <img src="img/shop_button.png" alt="Магазин">
            </button>

            <button class="nav-button active-button">
                 <img src="img/menu_button.png" alt="Меню">
            </button>

            <button class="nav-button">Події</button>
        </div>

    </div>

    <script>
        // JavaScript Код
        let coins = 0; // Початкова кількість монет
        const coinCountElement = document.getElementById('coinCount'); // Елемент для відображення рахунку
        const coltImage = document.getElementById('coltImage'); // Зображення Кольта
        const currencyPanel = document.querySelector('.currency-panel'); // Панель валюти

        // Посилання на контейнер екранів та самі екрани
        const viewsContainer = document.getElementById('viewsContainer');
        const menuView = document.getElementById('menuView');
        const shopView = document.getElementById('shopView');
        const eventsView = document.getElementById('eventsView'); // Посилання на екран подій


        // Додаємо обробник події кліку на зображення Кольта
        coltImage.addEventListener('click', (event) => {
            coins++; // Збільшуємо кількість монет
            coinCountElement.textContent = coins; // Оновлюємо текст

            console.log('Клік! Монет:', coins);

            // Створюємо та анімуємо летючу монету
            createFlyingCoin(event.clientX, event.clientY);
        });

        function createFlyingCoin(startX, startY) {
            const flyingCoin = document.createElement('img');
            flyingCoin.src = 'img/gold_coin.png';
            flyingCoin.classList.add('flying-coin');

            // Встановлюємо початкову позицію в місці кліка
            flyingCoin.style.left = `${startX - 15}px`;
            flyingCoin.style.top = `${startY - 15}px`;
            flyingCoin.style.opacity = '1';

            document.body.appendChild(flyingCoin);

            // Отримуємо кінцеву позицію (центр монети в панелі валюти)
            const panelRect = currencyPanel.getBoundingClientRect();
            const targetX = panelRect.left + panelRect.width / 2 - 15;
            const targetY = panelRect.top + panelRect.height / 2 - 15;

            // Розраховуємо зміщення
            const deltaX = targetX - startX + 15;
            const deltaY = targetY - startY + 15;

            // Застосовуємо анімацію через style.transform
            flyingCoin.style.transform = `translate(${deltaX}px, ${deltaY}px) scale(0.5)`;
            flyingCoin.style.opacity = '0';

            // Видаляємо елемент після завершення анімації
            flyingCoin.addEventListener('transitionend', () => {
                flyingCoin.remove();
            });
        }


        // Обробники кліків для кнопок навігації
        const navButtons = document.querySelectorAll('.nav-button');
        navButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Прибираємо клас 'active-button' з усіх кнопок
                navButtons.forEach(btn => btn.classList.remove('active-button'));
                // Додаємо клас 'active-button' до натиснутої кнопки
                button.classList.add('active-button');

                // Визначаємо, яка кнопка була натиснута (за alt зображення або текстом)
                let buttonText = button.querySelector('img')?.alt || button.textContent.trim();

                console.log(`Натиснуто кнопку: ${buttonText}`);

                // --- Логіка перемикання екранів ---
                // Спершу приховуємо всі екрани
                hideAllViews();

                // Показуємо відповідний екран залежно від натиснутої кнопки
                if (buttonText === 'Магазин') {
                    shopView.classList.remove('hidden');
                     console.log('Перехід до Магазину');
                } else if (buttonText === 'Меню') {
                    menuView.classList.remove('hidden');
                    console.log('Перехід до Меню');
                } else if (buttonText === 'Події') {
                     eventsView.classList.remove('hidden');
                     console.log('Перехід до Подій');
                }

                 // Прокручуємо контейнер екранів нагору при перемиканні
                 viewsContainer.scrollTop = 0;
            });
        });

        // Функція для приховування всіх екранів
        function hideAllViews() {
            const views = document.querySelectorAll('.view');
            views.forEach(view => {
                view.classList.add('hidden');
            });
        }

        // Робимо екран Меню активним та відповідну кнопку активною при завантаженні
        document.addEventListener('DOMContentLoaded', () => {
             hideAllViews(); // Приховуємо всі екрани на старті
             menuView.classList.remove('hidden'); // Показуємо тільки екран Меню

             // Знаходимо кнопку Меню та робимо її активною при старті
             const menuButton = document.querySelector('.footer .nav-button img[alt="Меню"]')?.closest('.nav-button') ||
                                document.querySelector('.footer .nav-button.active-button'); // Шукаємо за alt або активним класом

             if (menuButton) {
                 navButtons.forEach(btn => btn.classList.remove('active-button')); // Прибираємо з усіх
                 menuButton.classList.add('active-button'); // Додаємо до кнопки Меню
             } else {
                  // Резервний варіант, якщо кнопку Меню не знайдено
                  console.warn("Кнопка Меню не знайдена для встановлення активного стану при завантаженні.");
             }

              // --- Інтеграція з Telegram Web App SDK (приклад) ---
              // Цей код виконується, якщо веб-додаток відкрито через Telegram
              if (Telegram.WebApp) {
                  Telegram.WebApp.ready(); // Повідомляємо Telegram, що Web App готовий
                  console.log("Telegram Web App готовий!");

                  // Приклад: Отримуємо дані користувача Telegram
                  if (Telegram.WebApp.initDataUnsafe && Telegram.WebApp.initDataUnsafe.user) {
                      const telegramUser = Telegram.WebApp.initDataUnsafe.user;
                      console.log("Відкрито користувачем Telegram:", telegramUser.first_name, "(ID:", telegramUser.id, ")");
                      // Ти можеш використовувати telegramUser.id для зв'язку прогресу гри з користувачем
                      // і, наприклад, передавати його до бота, коли потрібно зберегти дані.
                  }

                   // Приклад: Зміна розміру вікна Web App
                  Telegram.WebApp.expand(); // Розгорнути на весь екран, якщо потрібно
                  // Або Telegram.WebApp.setViewportStable(true);

                   // Приклад: Додати кнопку "Закрити" в заголовок Web App (не завжди відображається)
                   // Telegram.WebApp.setHeaderColor('bg_color');
                   // Telegram.WebApp.MainButton.setText('Закрити гру');
                   // Telegram.WebApp.MainButton.show();
                   // Telegram.WebApp.MainButton.onClick(Telegram.WebApp.close);

              } else {
                  console.log("Web App відкрито не через Telegram.");
                  // Тут може бути логіка для запуску гри в браузері без функцій Telegram
              }
               // --- Кінець інтеграції з Telegram Web App SDK ---

         });


    </script>

</body>
</html>
